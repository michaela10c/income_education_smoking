<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Interactive Component | Income, Education, Smoking and Cancer</title>
  <meta name="description" content="Chapter 5 Interactive Component | Income, Education, Smoking and Cancer" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Interactive Component | Income, Education, Smoking and Cancer" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Interactive Component | Income, Education, Smoking and Cancer" />
  
  
  

<meta name="author" content="Michael Zhou" />


<meta name="date" content="2023-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Income, Education, Smoking and Cancer</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic-hypotheses"><i class="fa fa-check"></i><b>2.1</b> Research topic + Hypotheses</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.2</b> Missing value analysis</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.3</b> Cleaning / transformation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#data-exploration"><i class="fa fa-check"></i><b>4.1</b> Data Exploration</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="results.html"><a href="results.html#population-density"><i class="fa fa-check"></i><b>4.1.1</b> Population density</a></li>
<li class="chapter" data-level="4.1.2" data-path="results.html"><a href="results.html#education-percentage-with-collegehigh-school-degrees"><i class="fa fa-check"></i><b>4.1.2</b> Education (percentage with college/high school degrees)</a></li>
<li class="chapter" data-level="4.1.3" data-path="results.html"><a href="results.html#smoking"><i class="fa fa-check"></i><b>4.1.3</b> Smoking</a></li>
<li class="chapter" data-level="4.1.4" data-path="results.html"><a href="results.html#cancer"><i class="fa fa-check"></i><b>4.1.4</b> Cancer</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#relationship-between-variables"><i class="fa fa-check"></i><b>4.2</b> Relationship between Variables</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive Component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="conclusion.html"><a href="conclusion.html#exploration"><i class="fa fa-check"></i><b>6.1</b> Exploration</a></li>
<li class="chapter" data-level="6.2" data-path="conclusion.html"><a href="conclusion.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a></li>
<li class="chapter" data-level="6.3" data-path="conclusion.html"><a href="conclusion.html#future-work"><i class="fa fa-check"></i><b>6.3</b> Future Work</a></li>
<li class="chapter" data-level="6.4" data-path="conclusion.html"><a href="conclusion.html#lessons-learned"><i class="fa fa-check"></i><b>6.4</b> Lessons Learned</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="extraneous-graphs.html"><a href="extraneous-graphs.html"><i class="fa fa-check"></i><b>7</b> Extraneous graphs</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Income, Education, Smoking and Cancer</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Interactive Component<a href="interactive-component.html#interactive-component" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Below are the top or bottom 5 US states for each indicator:</p>
<meta charset="utf-8">
<title>
Income, Education, Smoking and Cancer&gt;
</title>
<style type="text/css">
            h1 {color:black;}       /* CSS styling */
            p {color:blue;}
</style>
<body>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<h1>
Top/Bottom 5 States for each Indicator
</h1>
</h3>
<!-- Add buttons -->
<!-- Create a div where the graph will take place -->
<h2>
Population Density (per square-mile)
</h2>
<div class="population_density">
<p><button onclick="update(population_density_top_5, population_density)">Top 5</button>
<button onclick="update(population_density_bottom_5, population_density)">Bottom 5</button></p>
</div>
<div id="population_density">

</div>
<h2>
Average Household Income ($)
</h2>
<div class="avg_income">
<p><button onclick="update(avg_income_top_5, avg_income)">Top 5</button>
<button onclick="update(avg_income_bottom_5, avg_income)">Bottom 5</button></p>
</div>
<div id="avg_income">

</div>
<h2>
Median Household Income ($)
</h2>
<div class="median_income">
<p><button onclick="update(median_income_top_5, median_income)">Top 5</button>
<button onclick="update(median_income_bottom_5, median_income)">Bottom 5</button></p>
</div>
<div id="median_income">

</div>
<h2>
High School Graduation Rate (%)
</h2>
<div class="education_highschool">
<p><button onclick="update(education_highschool_top_5, education_highschool)">Top 5</button>
<button onclick="update(education_highschool_bottom_5, education_highschool)">Bottom 5</button></p>
</div>
<div id="education_highschool">

</div>
<h2>
College Graduation Rate (%)
</h2>
<div class="education_college">
<p><button onclick="update(education_college_top_5, education_college)">Top 5</button>
<button onclick="update(education_college_bottom_5, education_college)">Bottom 5</button></p>
</div>
<div id="education_college">

</div>
<h2>
Smoking Rate (%)
</h2>
<div class="smoking_rates">
<p><button onclick="update(smoking_rates_top_5, smoking_rates)">Top 5</button>
<button onclick="update(smoking_rates_bottom_5, smoking_rates)">Bottom 5</button></p>
</div>
<div id="smoking_rates">

</div>
<h2>
Cancer Cases per 100K Population
</h2>
<div class="cancer_rates">
<p><button onclick="update(cancer_rates_top_5, cancer_rates)">Top 5</button>
<button onclick="update(cancer_rates_bottom_5, cancer_rates)">Bottom 5</button></p>
</div>
<div id="cancer_rates">

</div>
<script>
// create  data_set
var population_density_top_5 = [   
   {state: "NJ", value: 1283.4000   },
   {state: "RI", value: 1074.2959},
   {state: "MA", value: 919.8210},
   {state: "CT", value: 746.6954},
   {state: "MD", value: 648.8436}
];

var population_density_bottom_5 = [
  {
    "state": "AK",
    "value": 1.2974
  },
  {
    "state": "WY",
    "value": 5.9821
  },
  {
    "state": "MT",
    "value": 7.6448
  },
  {
    "state": "ND",
    "value": 11.7541
  },
  {
    "state": "SD",
    "value": 11.9826
  }
];

var avg_income_top_5 = [
  {
    "state": "NJ",
    "value": 117868
  },
  {
    "state": "MA",
    "value": 115964
  },
  {
    "state": "CT",
    "value": 115337
  },
  {
    "state": "MD",
    "value": 114236
  },
  {
    "state": "CA",
    "value": 111622
  }];

var avg_income_bottom_5 = [
  {
    "state": "MS",
    "value": 65156
  },
  {
    "state": "WV",
    "value": 65332
  },
  {
    "state": "AR",
    "value": 69357
  },
  {
    "state": "NM",
    "value": 70241
  },
  {
    "state": "AL",
    "value": 71964
  }
];

var median_income_top_5 = [
  {
    "state": "MD",
    "value": 87063
  },
  {
    "state": "NJ",
    "value": 85245
  },
  {
    "state": "MA",
    "value": 84385
  },
  {
    "state": "HI",
    "value": 83173
  },
  {
    "state": "CT",
    "value": 79855
  }
];

var median_income_bottom_5 = [
  {
    "state": "MS",
    "value": 46511
  },
  {
    "state": "WV",
    "value": 48037
  },
  {
    "state": "AR",
    "value": 49475
  },
  {
    "state": "LA",
    "value": 50800
  },
  {
    "state": "NM",
    "value": 51243
  }
];


var education_highschool_top_5 = [
  {
    "state": "MT",
    "value": 94
  },
  {
    "state": "WY",
    "value": 93.6
  },
  {
    "state": "VT",
    "value": 93.5
  },
  {
    "state": "MN",
    "value": 93.4
  },
  {
    "state": "NH",
    "value": 93.3
  }
]; 

var education_highschool_bottom_5 = [
  {
    "state": "CA",
    "value": 83.9
  },
  {
    "state": "TX",
    "value": 84.4
  },
  {
    "state": "MS",
    "value": 85.3
  },
  {
    "state": "LA",
    "value": 85.9
  },
  {
    "state": "NM",
    "value": 86.5
  }
]; 

var education_college_top_5 = [
  {
    "state": "MA",
    "value": 44.5
  },
  {
    "state": "CO",
    "value": 41.6
  },
  {
    "state": "MD",
    "value": 40.9
  },
  {
    "state": "NJ",
    "value": 40.7
  },
  {
    "state": "CT",
    "value": 40
  }
]; 

var education_college_bottom_5 = [
  {
    "state": "WV",
    "value": 21.3
  },
  {
    "state": "MS",
    "value": 22.8
  },
  {
    "state": "AR",
    "value": 23.8
  },
  {
    "state": "LA",
    "value": 24.9
  },
  {
    "state": "KY",
    "value": 25
  }
];

var smoking_rates_top_5 = [
  {
    "state": "WV",
    "value": 23.8
  },
  {
    "state": "KY",
    "value": 23.6
  },
  {
    "state": "LA",
    "value": 21.9
  },
  {
    "state": "OH",
    "value": 20.8
  },
  {
    "state": "MS",
    "value": 20.4
  }
];

var smoking_rates_bottom_5 = [
  {
    "state": "UT",
    "value": 7.9
  },
  {
    "state": "CA",
    "value": 10
  },
  {
    "state": "MA",
    "value": 12
  },
  {
    "state": "CT",
    "value": 12.1
  },
  {
    "state": "HI",
    "value": 12.3
  }
];

var cancer_rates_top_5 = [
  {
    "state": "KY",
    "value": 510.2
  },
  {
    "state": "NJ",
    "value": 482.4
  },
  {
    "state": "WV",
    "value": 482.4
  },
  {
    "state": "NY",
    "value": 480.6
  },
  {
    "state": "LA",
    "value": 478.6
  }
];

var cancer_rates_bottom_5 = [
  {
    "state": "SD",
    "value": 49.6
  },
  {
    "state": "IA",
    "value": 77.3
  },
  {
    "state": "NM",
    "value": 361.1
  },
  {
    "state": "AZ",
    "value": 374.9
  },
  {
    "state": "CA",
    "value": 392.4
  }
];

// set the dimensions and margins of the graph
var margin = {top: 30, right: 30, bottom: 70, left: 60},
    width = 800 - margin.left - margin.right,
    height = 450 - margin.top - margin.bottom;

function init(div_id) {
  svg = d3.select("#" + div_id)
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")")
   .append("g", id ='circ');

  // Initialize the X axis
  var x = d3.scaleBand()
    .range([ 0, width ])
    .padding(0.2);
  var xAxis = svg.append("g")
    .attr("transform", "translate(0," + height + ")")
  
  // Initialize the Y axis
  var y = d3.scaleLinear()
    .range([ height, 0]);
  var yAxis = svg.append("g")
    .attr("class", "myYaxis")
    
  return {'svg': svg, 'x': x, 'xAxis': xAxis, 'y': y, 'yAxis': yAxis};
}

var population_density = init('population_density')
var avg_income = init('avg_income')
var median_income = init('median_income')
var education_highschool = init('education_highschool')
var education_college = init('education_college')
var smoking_rates = init('smoking_rates')
var cancer_rates = init('cancer_rates')

// A function that create / update the plot for a given variable:
function update(data, axis_data) {
  svg = axis_data.svg
  x = axis_data.x
  xAxis = axis_data.xAxis
  y = axis_data.y
  yAxis = axis_data.yAxis
  
  // Update the X axis
  x.domain(data.map(function(d) { return d.state; }))
  xAxis.call(d3.axisBottom(x))

  // Update the Y axis
  y.domain([0, d3.max(data, function(d) { return d.value }) ]);
  yAxis.transition().duration(1000).call(d3.axisLeft(y));

  // Create the u variable
  var u = svg.selectAll("rect")
    .data(data)

  u
    .enter()
    .append("rect") // Add a new rect for each new elements
    .merge(u) // get the already existing elements as well
    .transition() // and apply changes to all of them
    .duration(1000)
      .attr("x", function(d) { return x(d.state); })
      .attr("y", function(d) { return y(d.value); })
      .attr("width", x.bandwidth())
      .attr("height", function(d) { return height - y(d.value); })
      .attr("fill", "#7b6888")

  var rect = svg.selectAll("rect").on("mouseover", function(d, i) {
               //highlight
                 d3.select(this).style("fill","#BA5C25");
                })
            .on("mouseout", function(d) {
                 d3.select(this).style("fill","#7b6888");
                });

  // If less group in the new dataset, I delete the ones not in use anymore
  u
    .exit()
    .remove()
   
  <!-- g.append("g") -->
  <!--  .attr("transform", "translate(0," + height + ")") -->
  <!--  .call(d3.axisBottom(xScale)) -->
  <!--  .append("text") -->
  <!--  .attr("y", height - 250) -->
  <!--  .attr("x", width - 100) -->
  <!--  .attr("text-anchor", "end") -->
  <!--  .attr("stroke", "black") -->
  <!--  .text(xlabel); -->

  <!-- g.append("g") -->
  <!--  .call(d3.axisLeft(yScale) -->
  <!--  .tickFormat(function(d){ -->
  <!--      return "$" + d; -->
  <!--  }).ticks(10)) -->
  <!--  .append("text") -->
  <!--  .attr("transform", "rotate(-90)") -->
  <!--  .attr("y", 6) -->
  <!--  .attr("dy", "-5.1em") -->
  <!--  .attr("text-anchor", "end") -->
  <!--  .attr("stroke", "black") -->
  <!--  .text(ylabel); -->
}

update(population_density_top_5, population_density)
update(avg_income_top_5, avg_income)
update(median_income_top_5, median_income)
update(education_highschool_top_5, education_highschool)
update(education_college_top_5, education_college)
update(smoking_rates_top_5, smoking_rates)
update(cancer_rates_top_5, cancer_rates)

</script>
</body>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/michaela10c/income_education_smoking/edit/main/interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/michaela10c/income_education_smoking/blob/main/interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
